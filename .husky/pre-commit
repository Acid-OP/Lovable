#!/bin/sh

echo "ğŸ” Running pre-commit checks..."
echo ""

# 1. Lint-staged - auto-format and fix staged files FIRST (fast)
echo "ğŸš€ Auto-formatting staged files..."
pnpm exec lint-staged || {
  echo "âŒ Lint-staged failed."
  exit 1
}
echo "âœ… Staged files formatted"
echo ""

# 2. Type checking - catches type errors across entire codebase
echo "ğŸ“ Type checking..."
pnpm run check-types || {
  echo "âŒ Type check failed. Fix type errors before committing."
  exit 1
}
echo "âœ… Type check passed"
echo ""

# 3. Linting - checks code quality and style
echo "ğŸ¨ Linting codebase..."
pnpm run lint || {
  echo "âŒ Lint check failed. Fix linting errors before committing."
  exit 1
}
echo "âœ… Lint check passed"
echo ""

echo "âœ¨ All pre-commit checks passed! Creating commit..."
